name: Dragon CI

on:
  workflow_dispatch:
  push:
    branches:
      - main
  

jobs:
  ASCII-job:
    runs-on: self-hosted
    steps:
      - name: Checkout code
        uses: actions/checkout@v5

      - name: Install cowsay in WSL
        run: |
          wsl -d Ubuntu sudo apt update
          wsl -d Ubuntu sudo apt install cowsay -y
        shell: powershell

      # Step 3: Make the script executable inside WSL
      - name: Make dragon.sh executable
        run: wsl -d Ubuntu "chmod +x ${{ github.workspace }}/dragon.sh"
        shell: powershell

      # Step 4: Run the script inside WSL
      - name: Run Dragon Script
        run: wsl -d Ubuntu "${{ github.workspace }}/dragon.sh"
        shell: powershell
